<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Escrow Management – Safe Trade Hub</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="css/escrow-management.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="index.html" class="logo" aria-label="Safe Trade Hub Home">SafeTradeHub</a>
      <nav class="header-actions">
        <a class="icon-btn" href="cart.html" aria-label="Cart" title="Cart" style="position:relative">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6L5 3H2"/><circle cx="9" cy="20" r="1.75"/><circle cx="18" cy="20" r="1.75"/></svg>
          <span class="cart-count" id="cartCount">0</span>
        </a>
        <a class="icon-btn" href="dashboard.html" aria-label="Dashboard" title="Dashboard">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
        </a>
      </nav>
    </div>
  </header>

  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <div class="page-breadcrumb">
        <a href="index.html">Home</a>
        <span>›</span>
        <a href="dashboard.html">Dashboard</a>
        <span>›</span>
        <span>Escrow Management</span>
      </div>
      <h1>Escrow System & Payment Handling</h1>
      <p class="page-description">Manage secure payments, escrow transactions, and dispute resolution</p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="section">
    <div class="container">
      <!-- Stats Overview -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-wallet"></i>
          </div>
          <div class="stat-content">
            <h3 id="totalEscrowAmount">$0.00</h3>
            <p>Total in Escrow</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h3 id="pendingTransactions">0</h3>
            <p>Pending Transactions</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-content">
            <h3 id="completedTransactions">0</h3>
            <p>Completed Today</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div class="stat-content">
            <h3 id="disputesCount">0</h3>
            <p>Active Disputes</p>
          </div>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <div class="tab-navigation">
        <button class="tab-btn active" data-tab="payments">
          <i class="fas fa-credit-card"></i>
          Payment Processing
        </button>
        <button class="tab-btn" data-tab="escrow">
          <i class="fas fa-shield-alt"></i>
          Escrow Management
        </button>
        <button class="tab-btn" data-tab="disputes">
          <i class="fas fa-gavel"></i>
          Dispute Resolution
        </button>
        <button class="tab-btn" data-tab="reports">
          <i class="fas fa-chart-bar"></i>
          Reports & Analytics
        </button>
      </div>

      <!-- Payment Processing Tab -->
      <div class="tab-content active" id="payments-tab">
        <div class="content-header">
          <h2>Payment Processing</h2>
          <p>Secure payment handling with admin-controlled Firebase wallet</p>
        </div>

        <div class="payment-methods">
          <div class="method-card">
            <div class="method-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="method-content">
              <h3>Escrow Payment</h3>
              <p>Funds held securely until delivery confirmation</p>
              <div class="method-features">
                <span class="feature-tag">Secure</span>
                <span class="feature-tag">Protected</span>
                <span class="feature-tag">Verified</span>
              </div>
            </div>
            <div class="method-status">
              <span class="status-badge active">Active</span>
            </div>
          </div>

          <div class="method-card">
            <div class="method-icon">
              <i class="fas fa-credit-card"></i>
            </div>
            <div class="method-content">
              <h3>Direct Payment</h3>
              <p>Immediate payment processing (coming soon)</p>
              <div class="method-features">
                <span class="feature-tag">Fast</span>
                <span class="feature-tag">Instant</span>
              </div>
            </div>
            <div class="method-status">
              <span class="status-badge coming-soon">Coming Soon</span>
            </div>
          </div>
        </div>

        <div class="payment-flow">
          <h3>Payment Flow Process</h3>
          <div class="flow-steps">
            <div class="flow-step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>Payment Initiated</h4>
                <p>Buyer initiates payment through secure checkout</p>
              </div>
            </div>
            <div class="flow-arrow">
              <i class="fas fa-arrow-right"></i>
            </div>
            <div class="flow-step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>Funds Held</h4>
                <p>Payment held in admin-controlled Firebase wallet</p>
              </div>
            </div>
            <div class="flow-arrow">
              <i class="fas fa-arrow-right"></i>
            </div>
            <div class="flow-step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>Delivery Confirmation</h4>
                <p>Funds released only after verified delivery</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Escrow Management Tab -->
      <div class="tab-content" id="escrow-tab">
        <div class="content-header">
          <h2>Escrow Management</h2>
          <p>Monitor and manage escrow transactions and fund releases</p>
        </div>

        <div class="escrow-filters">
          <div class="filter-group">
            <label>Status Filter</label>
            <select id="escrowStatusFilter">
              <option value="all">All Transactions</option>
              <option value="held">Funds Held</option>
              <option value="shipped">Shipped to Escrow</option>
              <option value="at_escrow">At Escrow Location</option>
              <option value="awaiting_confirmation">Awaiting Confirmation</option>
              <option value="released">Funds Released</option>
              <option value="refunded">Refunded</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Date Range</label>
            <input type="date" id="escrowDateFrom">
            <input type="date" id="escrowDateTo">
          </div>
          <div class="filter-group">
            <label>Amount Range</label>
            <input type="number" id="escrowAmountMin" placeholder="Min Amount">
            <input type="number" id="escrowAmountMax" placeholder="Max Amount">
          </div>
          <button class="btn btn-primary" onclick="applyEscrowFilters()">
            <i class="fas fa-filter"></i>
            Apply Filters
          </button>
        </div>

        <div class="escrow-transactions">
          <div class="transactions-header">
            <h3>Active Escrow Transactions</h3>
            <div class="transaction-actions">
              <button class="btn btn-secondary" onclick="refreshEscrowData()">
                <i class="fas fa-sync-alt"></i>
                Refresh
              </button>
              <button class="btn btn-primary" onclick="exportEscrowData()">
                <i class="fas fa-download"></i>
                Export
              </button>
            </div>
          </div>
          <div class="transactions-table">
            <table id="escrowTable">
              <thead>
                <tr>
                  <th>Transaction ID</th>
                  <th>Order ID</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="escrowTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Dispute Resolution Tab -->
      <div class="tab-content" id="disputes-tab">
        <div class="content-header">
          <h2>Dispute Resolution</h2>
          <p>Review and resolve buyer disputes for product mismatches</p>
        </div>

        <div class="dispute-stats">
          <div class="dispute-stat">
            <div class="stat-number" id="openDisputes">0</div>
            <div class="stat-label">Open Disputes</div>
          </div>
          <div class="dispute-stat">
            <div class="stat-number" id="resolvedDisputes">0</div>
            <div class="stat-label">Resolved Today</div>
          </div>
          <div class="dispute-stat">
            <div class="stat-number" id="avgResolutionTime">0h</div>
            <div class="stat-label">Avg Resolution Time</div>
          </div>
        </div>

        <div class="dispute-filters">
          <div class="filter-group">
            <label>Dispute Status</label>
            <select id="disputeStatusFilter">
              <option value="all">All Disputes</option>
              <option value="open">Open</option>
              <option value="under_review">Under Review</option>
              <option value="resolved">Resolved</option>
              <option value="closed">Closed</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Priority</label>
            <select id="disputePriorityFilter">
              <option value="all">All Priorities</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="applyDisputeFilters()">
            <i class="fas fa-filter"></i>
            Apply Filters
          </button>
        </div>

        <div class="disputes-list">
          <div class="disputes-header">
            <h3>Dispute Cases</h3>
            <div class="dispute-actions">
              <button class="btn btn-secondary" onclick="refreshDisputeData()">
                <i class="fas fa-sync-alt"></i>
                Refresh
              </button>
            </div>
          </div>
          <div class="disputes-grid" id="disputesGrid">
            <!-- Dynamic content -->
          </div>
        </div>
      </div>

      <!-- Reports & Analytics Tab -->
      <div class="tab-content" id="reports-tab">
        <div class="content-header">
          <h2>Reports & Analytics</h2>
          <p>Comprehensive analytics and reporting for escrow operations</p>
        </div>

        <div class="reports-grid">
          <div class="report-card">
            <h3>Transaction Volume</h3>
            <div class="chart-placeholder">
              <i class="fas fa-chart-line"></i>
              <p>Transaction volume over time</p>
            </div>
          </div>
          <div class="report-card">
            <h3>Success Rate</h3>
            <div class="success-rate">
              <div class="rate-circle">
                <span id="successRate">98.5%</span>
              </div>
              <p>Successful transactions</p>
            </div>
          </div>
          <div class="report-card">
            <h3>Average Processing Time</h3>
            <div class="processing-time">
              <div class="time-display">
                <span id="avgProcessingTime">2.3</span>
                <span class="time-unit">days</span>
              </div>
              <p>From payment to release</p>
            </div>
          </div>
        </div>

        <div class="reports-actions">
          <button class="btn btn-primary" onclick="generateReport('daily')">
            <i class="fas fa-calendar-day"></i>
            Daily Report
          </button>
          <button class="btn btn-primary" onclick="generateReport('weekly')">
            <i class="fas fa-calendar-week"></i>
            Weekly Report
          </button>
          <button class="btn btn-primary" onclick="generateReport('monthly')">
            <i class="fas fa-calendar-alt"></i>
            Monthly Report
          </button>
          <button class="btn btn-secondary" onclick="exportAllReports()">
            <i class="fas fa-download"></i>
            Export All
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <p>All Rights Reserved By Safe Trade Hub</p>
    </div>
  </footer>

  <!-- External JavaScript Files -->
  <script src="js/escrow-management.js"></script>
</body>
</html>
