<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - SafeTradeHub</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/css/dashboard.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="/static/js/firebase-config.js"></script>
</head>

<body>

  <!-- Sidebar -->
  <aside class="dashboard-sidebar">
    <div class="sidebar-header">
      <a href="index.html" class="sidebar-logo">
        <i class="fas fa-shield-alt"></i> SafeTradeHub
      </a>
    </div>

    <nav class="sidebar-nav">
      <a href="dashboard.html" class="nav-item active">
        <i class="fas fa-home"></i> Dashboard
      </a>
      <a href="orders.html" class="nav-item">
        <i class="fas fa-box"></i> Orders
      </a>
      <a href="product-management.html" class="nav-item" id="navProducts" style="display: none;">
        <i class="fas fa-tags"></i> Products
      </a>
      <a href="verification.html" class="nav-item">
        <i class="fas fa-check-circle"></i> Verification
      </a>
      <a href="wallet.html" class="nav-item">
        <i class="fas fa-wallet"></i> Wallet
      </a>
      <a href="messages.html" class="nav-item">
        <i class="fas fa-envelope"></i> Messages
      </a>
      <a href="profile.html" class="nav-item">
        <i class="fas fa-user"></i> Profile
      </a>
      <a href="settings.html" class="nav-item">
        <i class="fas fa-cog"></i> Settings
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-mini-profile">
        <img src="/static/images/avatar-placeholder.png" alt="User" class="user-avatar-small" id="userAvatar">
        <div class="user-info-mini">
          <h4 id="userName">Loading...</h4>
          <span id="userRole">...</span>
        </div>
      </div>
      <a href="#" onclick="logout()" class="nav-item" style="color: var(--danger);">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </div>
  </aside>

  <script>
    // Immediate check to prevent flicker
    (function () {
      const userData = localStorage.getItem('userData');
      if (userData) {
        try {
          const user = JSON.parse(userData);
          if (user.role === 'Seller') {
            const navProducts = document.getElementById('navProducts');
            if (navProducts) navProducts.style.display = 'flex';
          }
        } catch (e) {
          console.error('Error parsing user data for sidebar:', e);
        }
      }
    })();
  </script>

  <!-- Main Content -->
  <main class="dashboard-main">
    <div class="dashboard-topbar">
      <div class="page-title">
        <h1>Dashboard</h1>
        <p>Welcome back to your control center</p>
      </div>
      <!-- Add Notification Bell Here if needed -->
    </div>

    <div id="dashboardContent">
      <!-- Dynamic Content Loaded via JS -->
      <div style="text-align: center; padding: 2rem; color: #6b7280;">
        <i class="fas fa-spinner fa-spin fa-2x"></i>
        <p style="margin-top: 1rem;">Loading dashboard data...</p>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="/static/js/dashboard.js"></script>
</body>

</html>
