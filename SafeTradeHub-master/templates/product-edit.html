<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Product – Safe Trade Hub</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="stylesheet" href="/static/css/product-upload.css" />

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <!-- Firebase Configuration -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB0RraIZr7Z3rjKIYw6dE2g_9Waqll5JvI",
      authDomain: "safetradehub-def1d.firebaseapp.com",
      databaseURL: "https://safetradehub-def1d-default-rtdb.firebaseio.com",
      projectId: "safetradehub-def1d",
      storageBucket: "safetradehub-def1d.firebasestorage.app",
      messagingSenderId: "633146502278",
      appId: "1:633146502278:web:6c82d4a0768daebdd7b507",
      measurementId: "G-1857Q7JPKZ"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
  </script>

  <!-- Load authentication system -->
  <script src="/static/js/auth-manager.js"></script>
  <script src="/static/js/header-manager.js"></script>
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="index.html" class="logo">SafeTradeHub</a>
      <nav class="header-actions">
        <!-- Navigation will be updated by HeaderManager -->
      </nav>
    </div>
  </header>

  <main class="main-content">
    <!-- Breadcrumb -->
    <section class="breadcrumb-section">
      <div class="container">
        <nav class="breadcrumb">
          <a href="index.html">Home</a>
          <span class="breadcrumb-separator">›</span>
          <a href="dashboard.html">Dashboard</a>
          <span class="breadcrumb-separator">›</span>
          <a href="product-management.html">Product Management</a>
          <span class="breadcrumb-separator">›</span>
          <span class="breadcrumb-current">Edit Product</span>
        </nav>
      </div>
    </section>

    <!-- Edit Form Section -->
    <section class="upload-section">
      <div class="container">
        <div class="upload-header">
          <h1>Edit Product</h1>
          <p class="upload-subtitle">Update your product information</p>
        </div>

        <form id="productEditForm" class="upload-form" enctype="multipart/form-data">
          <!-- Basic Information Card -->
          <div class="form-card">
            <div class="card-header">
              <h2>Basic Information</h2>
              <p class="card-subtitle">Essential details about your product</p>
            </div>

            <div class="form-grid">
              <!-- Product Name -->
              <div class="form-group full-width">
                <label for="productName" class="form-label required">Product Name</label>
                <input type="text" id="productName" name="name" class="form-input"
                  placeholder="Enter a clear, descriptive product name" maxlength="100" required>
                <div class="form-hint">Be specific and descriptive. This helps buyers find your product.</div>
              </div>

              <!-- Category -->
              <div class="form-group">
                <label for="productCategory" class="form-label required">Category</label>
                <select id="productCategory" name="category" class="form-select" required>
                  <option value="">Select a category</option>
                  <option value="mobile">Mobile Phones & Accessories</option>
                  <option value="camera">Cameras & Photography</option>
                  <option value="computers">Computers & Laptops</option>
                  <option value="fashion">Fashion & Clothing</option>
                  <option value="beauty">Beauty & Cosmetics</option>
                  <option value="books">Books & Education</option>
                  <option value="furniture">Furniture & Home Decor</option>
                  <option value="gym">Gym & Fitness Equipment</option>
                  <option value="home">Home & Garden</option>
                  <option value="services">Professional Services</option>
                  <option value="sports">Sports & Outdoor Equipment</option>
                  <option value="pets">Pet Care Products</option>
                </select>
              </div>

              <!-- Condition -->
              <div class="form-group">
                <label for="productCondition" class="form-label required">Condition</label>
                <select id="productCondition" name="condition" class="form-select" required>
                  <option value="">Select condition</option>
                  <option value="new">New</option>
                  <option value="used">Used - Good</option>
                  <option value="refurbished">Refurbished</option>
                </select>
              </div>

              <!-- Price -->
              <div class="form-group">
                <label for="productPrice" class="form-label required">Price ($)</label>
                <input type="number" id="productPrice" name="price" class="form-input" placeholder="0.00" step="0.01"
                  min="0" required>
              </div>

              <!-- Stock Quantity -->
              <div class="form-group">
                <label for="productStock" class="form-label required">Stock Quantity</label>
                <input type="number" id="productStock" name="stock" class="form-input" placeholder="1" min="0" required>
              </div>

              <!-- Location -->
              <div class="form-group">
                <label for="productLocation" class="form-label">Location</label>
                <input type="text" id="productLocation" name="location" class="form-input" placeholder="City, State"
                  maxlength="100">
                <div class="form-hint">Optional: Helps buyers understand shipping costs</div>
              </div>
            </div>
          </div>

          <!-- Description Card -->
          <div class="form-card">
            <div class="card-header">
              <h2>Product Description</h2>
              <p class="card-subtitle">Detailed information about your product</p>
            </div>

            <div class="form-group">
              <label for="productDescription" class="form-label required">Description</label>
              <textarea id="productDescription" name="description" class="form-textarea"
                placeholder="Provide a detailed description of your product. Include features, specifications, and any important details buyers should know."
                rows="6" maxlength="2000" required></textarea>
              <div class="form-hint">
                <span id="descriptionCount">0</span>/2000 characters
              </div>
            </div>

            <!-- Tags -->
            <div class="form-group">
              <label for="productTags" class="form-label">Tags</label>
              <input type="text" id="productTags" name="tags" class="form-input"
                placeholder="Enter tags separated by commas (e.g., smartphone, android, unlocked)">
              <div class="form-hint">Add relevant keywords to help buyers find your product</div>
              <div id="tagPreview" class="tag-preview"></div>
            </div>
          </div>

          <!-- Current Images Card -->
          <div class="form-card">
            <div class="card-header">
              <h2>Current Images</h2>
              <p class="card-subtitle">Manage your product images</p>
            </div>

            <div id="currentImages" class="current-images">
              <!-- Current images will be loaded here -->
            </div>
          </div>

          <!-- Specifications Card -->
          <div class="form-card">
            <div class="card-header">
              <h2>Product Specifications</h2>
              <p class="card-subtitle">Technical details and specifications</p>
            </div>

            <div id="specificationsContainer" class="specifications-container">
              <!-- Specifications will be loaded here -->
            </div>

            <button type="button" id="addSpecification" class="btn btn-outline">
              <svg class="btn-icon" viewBox="0 0 24 24">
                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
              </svg>
              Add Specification
            </button>
          </div>

          <!-- Shipping & Policies Card -->
          <div class="form-card">
            <div class="card-header">
              <h2>Shipping & Policies</h2>
              <p class="card-subtitle">Shipping information and return policies</p>
            </div>

            <div class="form-grid">
              <!-- Shipping Method -->
              <div class="form-group">
                <label for="shippingMethod" class="form-label">Shipping Method</label>
                <select id="shippingMethod" name="shippingMethod" class="form-select">
                  <option value="standard">Standard Shipping</option>
                  <option value="express">Express Shipping</option>
                  <option value="pickup">Local Pickup Only</option>
                  <option value="both">Both Shipping & Pickup</option>
                </select>
              </div>

              <!-- Shipping Cost -->
              <div class="form-group">
                <label for="shippingCost" class="form-label">Shipping Cost ($)</label>
                <input type="number" id="shippingCost" name="shippingCost" class="form-input" placeholder="0.00"
                  step="0.01" min="0">
              </div>

              <!-- Return Policy -->
              <div class="form-group full-width">
                <label for="returnPolicy" class="form-label">Return Policy</label>
                <textarea id="returnPolicy" name="returnPolicy" class="form-textarea"
                  placeholder="Describe your return policy, including time limits and conditions..."
                  rows="3"></textarea>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" id="cancelEdit" class="btn btn-secondary">
              <svg class="btn-icon" viewBox="0 0 24 24">
                <path
                  d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
              </svg>
              Cancel
            </button>

            <button type="submit" id="updateProduct" class="btn btn-primary">
              <svg class="btn-icon" viewBox="0 0 24 24">
                <path
                  d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
              </svg>
              Update Product
            </button>
          </div>
        </form>
      </div>
    </section>
  </main>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Updating product...</p>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="successModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Product Updated Successfully!</h3>
        <button class="modal-close" onclick="closeSuccessModal()">
          <svg viewBox="0 0 24 24">
            <path
              d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" />
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="success-icon">
          <svg viewBox="0 0 24 24">
            <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z" />
          </svg>
        </div>
        <p>Your product has been successfully updated!</p>
        <div class="success-actions">
          <a href="product-management.html" class="btn btn-primary">Back to Management</a>
          <a href="dashboard.html" class="btn btn-secondary">Go to Dashboard</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/static/js/product-edit.js"></script>
</body>

</html>
