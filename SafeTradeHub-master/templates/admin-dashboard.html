<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard - Safe Trade Hub</title>
  <link rel="stylesheet" href="/static/css/admin-dashboard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body style="display: none;" class="admin-dashboard-body">
  <!-- Admin Header -->
  <header class="admin-header">
    <div class="admin-header-content">
      <div class="admin-brand">
        <i class="fas fa-shield-alt"></i>
        <h1>Safe Trade Hub Admin</h1>
      </div>
      <div class="admin-header-actions">
        <div class="admin-notifications">
          <button class="notification-btn" id="notificationBtn">
            <i class="fas fa-bell"></i>
            <span class="notification-badge" id="notificationCount">3</span>
          </button>
        </div>
        <div class="admin-user-menu">
          <button class="admin-user-btn" id="adminUserBtn">
            <div class="admin-avatar">
              <i class="fas fa-user-shield"></i>
            </div>
            <span class="admin-name">Admin</span>
            <i class="fas fa-chevron-down"></i>
          </button>
          <div class="admin-dropdown" id="adminDropdown">
            <a href="#" class="dropdown-item">
              <i class="fas fa-user"></i>
              Profile
            </a>
            <a href="#" class="dropdown-item">
              <i class="fas fa-cog"></i>
              Settings
            </a>
            <hr class="dropdown-divider">
            <a href="#" class="dropdown-item" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i>
              Logout
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>
  <!-- Admin Layout -->
  <div class="admin-layout">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <nav class="admin-nav">
        <div class="nav-section">
          <h3 class="nav-title">Overview</h3>
          <a href="#dashboard" class="nav-item active" data-section="dashboard">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">User Management</h3>
          <a href="#users" class="nav-item" data-section="users">
            <i class="fas fa-users"></i>
            <span>Users</span>
            <span class="nav-badge" id="usersCount">0</span>
          </a>
          <a href="#verification" class="nav-item" data-section="verification">
            <i class="fas fa-user-check"></i>
            <span>Verification</span>
            <span class="nav-badge pending" id="pendingVerifications">0</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">Product Management</h3>
          <a href="#products" class="nav-item" data-section="products">
            <i class="fas fa-box"></i>
            <span>Products</span>
            <span class="nav-badge" id="productsCount">0</span>
          </a>
          <a href="#categories" class="nav-item" data-section="categories">
            <i class="fas fa-tags"></i>
            <span>Categories</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">Order & Logistics</h3>
          <a href="#orders" class="nav-item" data-section="orders">
            <i class="fas fa-shopping-cart"></i>
            <span>Orders</span>
            <span class="nav-badge" id="ordersCount">0</span>
          </a>
          <a href="#logistics" class="nav-item" data-section="logistics">
            <i class="fas fa-truck"></i>
            <span>Logistics</span>
            <span class="nav-badge" id="logisticsCount">0</span>
          </a>
          <a href="#transactions" class="nav-item" data-section="transactions">
            <i class="fas fa-credit-card"></i>
            <span>Transactions</span>
            <span class="nav-badge" id="transactionsCount">0</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">Finance</h3>
          <a href="#wallet" class="nav-item" data-section="wallet">
            <i class="fas fa-wallet"></i>
            <span>Wallet</span>
            <span class="nav-badge pending" id="pendingWithdrawalsCount">0</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">Escrow & Disputes</h3>
          <a href="#escrow" class="nav-item" data-section="escrow">
            <i class="fas fa-shield-alt"></i>
            <span>Escrow Management</span>
            <span class="nav-badge" id="escrowCount">0</span>
          </a>
          <a href="#disputes" class="nav-item" data-section="disputes">
            <i class="fas fa-gavel"></i>
            <span>Disputes</span>
            <span class="nav-badge pending" id="disputesCount">0</span>
          </a>
        </div>
        <div class="nav-section">
          <h3 class="nav-title">System</h3>
          <a href="#analytics" class="nav-item" data-section="analytics">
            <i class="fas fa-chart-bar"></i>
            <span>Analytics</span>
          </a>
          <a href="#settings" class="nav-item" data-section="settings">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
        </div>
      </nav>
    </aside>
    <!-- Main Content -->
    <main class="admin-main">
      <!-- Dashboard Section -->
      <section class="admin-section active" id="dashboard-section">
        <div class="dashboard-header">
          <div>
            <h2>Dashboard Overview</h2>
            <p>Welcome back, here's what's happening with your store today.</p>
          </div>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="refreshDashboard()">
              <i class="fas fa-sync-alt"></i>
              Refresh
            </button>
          </div>
        </div>
        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card gradient-1">
            <div class="stat-content">
              <p class="stat-label">Total Users</p>
              <h3 class="stat-value" id="totalUsers">0</h3>
              <p class="stat-trend" id="usersTrend"><i class="fas fa-minus"></i> No data</p>
            </div>
            <div class="stat-icon-bg">
              <i class="fas fa-users"></i>
            </div>
          </div>
          <div class="stat-card gradient-2">
            <div class="stat-content">
              <p class="stat-label">Total Orders</p>
              <h3 class="stat-value" id="totalOrders">0</h3>
              <p class="stat-trend" id="ordersTrend"><i class="fas fa-minus"></i> No data</p>
            </div>
            <div class="stat-icon-bg">
              <i class="fas fa-shopping-cart"></i>
            </div>
          </div>
          <div class="stat-card gradient-3">
            <div class="stat-content">
              <p class="stat-label">Total Revenue</p>
              <h3 class="stat-value" id="totalRevenue">RS 0</h3>
              <p class="stat-trend" id="revenueTrend"><i class="fas fa-minus"></i> No data</p>
            </div>
            <div class="stat-icon-bg">
              <i class="fas fa-dollar-sign"></i>
            </div>
          </div>
          <div class="stat-card gradient-4">
            <div class="stat-content">
              <p class="stat-label">Pending Disputes</p>
              <h3 class="stat-value" id="pendingDisputes">0</h3>
              <p class="stat-trend" id="disputesTrend"><i class="fas fa-minus"></i> Stable</p>
            </div>
            <div class="stat-icon-bg">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
          </div>
        </div>
        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid-new">
          <!-- Left Column: Emails -->
          <div class="dashboard-col-main">
            <!-- Emails Section -->
            <div class="content-card">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h3>Recent Emails</h3>
                <span class="badge bg-light text-dark border">Safetradehubteam@gmail.com</span>
              </div>
              <div class="card-content">
                <div class="text-center py-5">
                  <div class="mb-3">
                    <i class="fas fa-inbox text-secondary" style="font-size: 48px; opacity: 0.5;"></i>
                  </div>
                  <h5 class="text-dark fw-bold">Inbox</h5>
                  <p class="text-muted small mb-4">View your recent emails directly in Gmail</p>
                  <a href="https://mail.google.com" target="_blank" class="btn btn-primary">
                    <i class="fab fa-google me-2"></i>Open Gmail
                  </a>
                </div>
              </div>
            </div>
          </div>
          <!-- Right Column: Quick Actions -->
          <div class="dashboard-col-side">
            <!-- Quick Actions -->
            <div class="content-card mb-4">
              <div class="card-header">
                <h3>Quick Actions</h3>
              </div>
              <div class="quick-actions-grid">
                <div class="qa-btn" onclick="showSection('users')">
                  <div class="qa-icon color-1"><i class="fas fa-user-plus"></i></div>
                  <span class="qa-label">Add User</span>
                </div>
                <div class="qa-btn" onclick="showSection('products')">
                  <div class="qa-icon color-2"><i class="fas fa-box-open"></i></div>
                  <span class="qa-label">Add Product</span>
                </div>
                <div class="qa-btn" onclick="showSection('disputes')">
                  <div class="qa-icon color-3"><i class="fas fa-gavel"></i></div>
                  <span class="qa-label">Disputes</span>
                </div>
                <div class="qa-btn" onclick="showSection('wallet')">
                  <div class="qa-icon color-4"><i class="fas fa-wallet"></i></div>
                  <span class="qa-label">Wallet</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Users Section -->
      <section class="admin-section" id="users-section">
        <div class="section-header">
          <h2>User Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search users..." id="userSearch">
            </div>
            <button class="btn btn-primary" onclick="addUser()">
              <i class="fas fa-plus"></i>
              Add User
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="usersTable">
              <thead>
                <tr>
                  <th>User ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Joined</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="usersTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Products Section -->
      <section class="admin-section" id="products-section">
        <div class="section-header">
          <h2>Product Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search products..." id="productSearch">
            </div>
            <select class="filter-select" id="categoryFilter">
              <option value="">All Categories</option>
              <option value="mobile">Mobile</option>
              <option value="camera">Camera</option>
              <option value="computers">Computers</option>
              <option value="fashion">Fashion</option>
              <option value="beauty">Beauty</option>
              <option value="books">Books</option>
              <option value="furniture">Furniture</option>
              <option value="gym">Gym</option>
              <option value="home">Home</option>
              <option value="services">Services</option>
              <option value="sports">Sports</option>
              <option value="pets">Pets</option>
            </select>
            <button class="btn btn-primary" onclick="addProduct()">
              <i class="fas fa-plus"></i>
              Add Product
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="productsTable">
              <thead>
                <tr>
                  <th>Product ID</th>
                  <th>Image</th>
                  <th>Name</th>
                  <th>Category</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="productsTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Transactions Section -->
      <section class="admin-section" id="transactions-section">
        <div class="section-header">
          <h2>Transaction Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search transactions..." id="transactionSearch">
            </div>
            <select class="filter-select" id="transactionStatusFilter">
              <option value="">All Status</option>
              <option value="pending">Pending</option>
              <option value="completed">Completed</option>
              <option value="failed">Failed</option>
              <option value="refunded">Refunded</option>
            </select>
            <button class="btn btn-secondary" onclick="exportTransactions()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="transactionsTable">
              <thead>
                <tr>
                  <th>Transaction ID</th>
                  <th>User</th>
                  <th>Amount</th>
                  <th>Type</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="transactionsTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Wallet Section -->
      <section class="admin-section" id="wallet-section">
        <div class="section-header">
          <h2>Wallet Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search wallets..." id="walletSearch">
            </div>
            <button class="btn btn-secondary" onclick="exportWalletData()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <!-- Wallet Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-coins"></i>
            </div>
            <div class="stat-content">
              <h3 id="totalSystemBalance">RS 0</h3>
              <p>Total System Balance</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-hand-holding-usd"></i>
            </div>
            <div class="stat-content">
              <h3 id="totalPendingWithdrawals">RS 0</h3>
              <p>Pending Withdrawals</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <h3 id="totalPendingDeposits">RS 0</h3>
              <p>Pending Deposits</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
              <h3 id="completedWithdrawalsCount">0</h3>
              <p>Completed Withdrawals</p>
            </div>
          </div>
        </div>
        <!-- Deposit Requests -->
        <div class="content-card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h3>Deposit Requests</h3>
            <div class="card-actions">
              <select class="filter-select" id="depositStatusFilter" onchange="filterDeposits()">
                <option value="pending">Pending</option>
                <option value="approved">Approved</option>
                <option value="rejected">Rejected</option>
                <option value="all">All</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table class="admin-table" id="depositRequestsTable">
              <thead>
                <tr>
                  <th>Request ID</th>
                  <th>User</th>
                  <th>Amount</th>
                  <th>Method</th>
                  <th>Proof</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="depositRequestsTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
        <!-- Withdrawal Requests -->
        <div class="content-card">
          <div class="card-header">
            <h3>Withdrawal Requests</h3>
            <div class="card-actions">
              <select class="filter-select" id="withdrawalStatusFilter" onchange="filterWithdrawals()">
                <option value="pending">Pending</option>
                <option value="approved">Approved</option>
                <option value="rejected">Rejected</option>
                <option value="all">All</option>
              </select>
            </div>
          </div>
          <div class="table-container">
            <table class="admin-table" id="withdrawalsTable">
              <thead>
                <tr>
                  <th>Request ID</th>
                  <th>User</th>
                  <th>Amount</th>
                  <th>Method</th>
                  <th>Details</th>
                  <th>Status</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="withdrawalsTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
        <!-- Recent Wallet Transactions -->
        <div class="content-card">
          <div class="card-header">
            <h3>Recent Wallet Transactions</h3>
          </div>
          <div class="table-container">
            <table class="admin-table" id="walletTransactionsTable">
              <thead>
                <tr>
                  <th>Transaction ID</th>
                  <th>User</th>
                  <th>Type</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="walletTransactionsTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Escrow Section -->
      <section class="admin-section" id="escrow-section">
        <div class="section-header">
          <h2>Escrow Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search escrow..." id="escrowSearch">
            </div>
            <select class="filter-select" id="escrowStatusFilter">
              <option value="">All Status</option>
              <option value="held">Funds Held</option>
              <option value="shipped">Shipped to Escrow</option>
              <option value="at_escrow">At Escrow Location</option>
              <option value="awaiting_confirmation">Awaiting Confirmation</option>
              <option value="released">Funds Released</option>
              <option value="refunded">Refunded</option>
            </select>
            <button class="btn btn-secondary" onclick="exportEscrow()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="escrowTable">
              <thead>
                <tr>
                  <th>Escrow ID</th>
                  <th>Order ID</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="escrowTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Disputes Section -->
      <section class="admin-section" id="disputes-section">
        <div class="section-header">
          <h2>Dispute Resolution</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search disputes..." id="disputeSearch">
            </div>
            <select class="filter-select" id="disputeStatusFilter">
              <option value="">All Status</option>
              <option value="open">Open</option>
              <option value="under_review">Under Review</option>
              <option value="resolved">Resolved</option>
              <option value="closed">Closed</option>
            </select>
            <button class="btn btn-secondary" onclick="exportDisputes()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="disputesTable">
              <thead>
                <tr>
                  <th>Dispute ID</th>
                  <th>Order ID</th>
                  <th>Issue</th>
                  <th>Priority</th>
                  <th>Status</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="disputesTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Verification Section -->
      <section class="admin-section" id="verification-section">
        <div class="section-header">
          <h2>User Verification</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search verifications..." id="verificationSearch">
            </div>
            <select class="filter-select" id="verificationStatusFilter">
              <option value="">All Status</option>
              <option value="pending">Pending</option>
              <option value="approved">Approved</option>
              <option value="rejected">Rejected</option>
            </select>
            <button class="btn btn-secondary" onclick="exportVerifications()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="verificationTable">
              <thead>
                <tr>
                  <th>User ID</th>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Document Type</th>
                  <th>Status</th>
                  <th>Submitted</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="verificationTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Categories Section -->
      <section class="admin-section" id="categories-section">
        <div class="section-header">
          <h2>Category Management</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search categories..." id="categorySearch">
            </div>
            <button class="btn btn-primary" onclick="addCategory()">
              <i class="fas fa-plus"></i>
              Add Category
            </button>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="categoriesTable">
              <thead>
                <tr>
                  <th>Category ID</th>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Products Count</th>
                  <th>Status</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="categoriesTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Orders Section -->
      <section class="admin-section" id="orders-section">
        <div class="section-header">
          <h2>Order Placement & Tracking</h2>
          <div class="section-actions">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search orders..." id="orderSearch">
            </div>
            <select class="filter-select" id="orderStatusFilter">
              <option value="">All Status</option>
              <option value="pending">Pending</option>
              <option value="processing">Processing</option>
              <option value="shipped">Shipped</option>
              <option value="delivered">Delivered</option>
              <option value="disputed">Disputed</option>
              <option value="cancelled">Cancelled</option>
            </select>
            <button class="btn btn-primary" onclick="refreshOrders()">
              <i class="fas fa-sync-alt"></i>
              Refresh
            </button>
            <button class="btn btn-secondary" onclick="exportOrders()">
              <i class="fas fa-download"></i>
              Export
            </button>
          </div>
        </div>
        <!-- Order Status Overview -->
        <div class="status-overview">
          <div class="status-card pending">
            <div class="status-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="status-info">
              <h3 id="pendingOrdersCount">0</h3>
              <p>Pending Orders</p>
            </div>
          </div>
          <div class="status-card shipped">
            <div class="status-icon">
              <i class="fas fa-truck"></i>
            </div>
            <div class="status-info">
              <h3 id="shippedOrdersCount">0</h3>
              <p>Shipped Orders</p>
            </div>
          </div>
          <div class="status-card delivered">
            <div class="status-icon">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="status-info">
              <h3 id="deliveredOrdersCount">0</h3>
              <p>Delivered Orders</p>
            </div>
          </div>
          <div class="status-card disputed">
            <div class="status-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="status-info">
              <h3 id="disputedOrdersCount">0</h3>
              <p>Disputed Orders</p>
            </div>
          </div>
        </div>
        <div class="content-card">
          <div class="table-container">
            <table class="admin-table" id="ordersTable">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Seller</th>
                  <th>Items</th>
                  <th>Total</th>
                  <th>Status</th>
                  <th>Tracking</th>
                  <th>Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="ordersTableBody">
                <!-- Dynamic content -->
              </tbody>
            </table>
          </div>
        </div>
      </section>
      <!-- Logistics Section -->
      <section class="admin-section" id="logistics-section">
        <div class="section-header">
          <h2>Logistics Integration</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="syncLogistics()">
              <i class="fas fa-sync-alt"></i>
              Sync All
            </button>
            <button class="btn btn-secondary" onclick="configureLogistics()">
              <i class="fas fa-cog"></i>
              Configure
            </button>
          </div>
        </div>
        <!-- Logistics Providers -->
        <div class="logistics-providers">
          <div class="provider-card">
            <div class="provider-header">
              <div class="provider-logo">
                <i class="fas fa-truck"></i>
              </div>
              <div class="provider-info">
                <h3>TCS Express</h3>
                <p class="provider-status active">Active</p>
              </div>
              <div class="provider-actions">
                <button class="btn btn-sm btn-secondary" onclick="configureProvider('tcs')">
                  <i class="fas fa-cog"></i>
                </button>
              </div>
            </div>
            <div class="provider-stats">
              <div class="stat">
                <span class="stat-value" id="tcsActiveShipments">0</span>
                <span class="stat-label">Active Shipments</span>
              </div>
              <div class="stat">
                <span class="stat-value" id="tcsDeliveryRate">98%</span>
                <span class="stat-label">Delivery Rate</span>
              </div>
            </div>
          </div>
          <div class="provider-card">
            <div class="provider-header">
              <div class="provider-logo">
                <i class="fas fa-shipping-fast"></i>
              </div>
              <div class="provider-info">
                <h3>Leopards Courier</h3>
                <p class="provider-status active">Active</p>
              </div>
              <div class="provider-actions">
                <button class="btn btn-sm btn-secondary" onclick="configureProvider('leopards')">
                  <i class="fas fa-cog"></i>
                </button>
              </div>
            </div>
            <div class="provider-stats">
              <div class="stat">
                <span class="stat-value" id="leopardsActiveShipments">0</span>
                <span class="stat-label">Active Shipments</span>
              </div>
              <div class="stat">
                <span class="stat-value" id="leopardsDeliveryRate">96%</span>
                <span class="stat-label">Delivery Rate</span>
              </div>
            </div>
          </div>
          <div class="provider-card">
            <div class="provider-header">
              <div class="provider-logo">
                <i class="fas fa-box"></i>
              </div>
              <div class="provider-info">
                <h3>PostEx</h3>
                <p class="provider-status inactive">Inactive</p>
              </div>
              <div class="provider-actions">
                <button class="btn btn-sm btn-primary" onclick="activateProvider('postex')">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
            <div class="provider-stats">
              <div class="stat">
                <span class="stat-value">-</span>
                <span class="stat-label">Active Shipments</span>
              </div>
              <div class="stat">
                <span class="stat-value">-</span>
                <span class="stat-label">Delivery Rate</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Recent Logistics Activity -->
        <div class="content-card">
          <div class="card-header">
            <h3>Recent Pickup & Delivery Updates</h3>
            <button class="btn btn-sm btn-secondary" onclick="refreshLogisticsActivity()">
              <i class="fas fa-refresh"></i>
              Refresh
            </button>
          </div>
          <div class="logistics-activity" id="logisticsActivity">
            <!-- Dynamic content -->
          </div>
        </div>
        <!-- Notifications Settings -->
        <div class="content-card">
          <div class="card-header">
            <h3>Notification Settings</h3>
          </div>
          <div class="notification-settings">
            <div class="setting-item">
              <div class="setting-info">
                <h4>Pickup Notifications</h4>
                <p>Send notifications when orders are picked up</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="pickupNotifications" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4>Delivery Notifications</h4>
                <p>Send notifications when orders are delivered</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="deliveryNotifications" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-info">
                <h4>Delay Alerts</h4>
                <p>Alert when deliveries are delayed</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" id="delayAlerts" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </section>
      <!-- Analytics Section -->
      <section class="admin-section" id="analytics-section">
        <div class="section-header">
          <h2>Analytics & Reports</h2>
          <div class="section-actions">
            <select class="filter-select" id="analyticsPeriod">
              <option value="7">Last 7 days</option>
              <option value="30">Last 30 days</option>
              <option value="90">Last 90 days</option>
              <option value="365">Last year</option>
            </select>
            <button class="btn btn-primary" onclick="generateReport()">
              <i class="fas fa-chart-line"></i>
              Generate Report
            </button>
          </div>
        </div>
        <div class="analytics-grid">
          <div class="analytics-card">
            <h3>Revenue Analytics</h3>
            <div class="chart-placeholder">
              <i class="fas fa-chart-line"></i>
              <p>Revenue chart will be displayed here</p>
            </div>
          </div>
          <div class="analytics-card">
            <h3>User Growth</h3>
            <div class="chart-placeholder">
              <i class="fas fa-chart-bar"></i>
              <p>User growth chart will be displayed here</p>
            </div>
          </div>
          <div class="analytics-card">
            <h3>Top Categories</h3>
            <div class="chart-placeholder">
              <i class="fas fa-chart-pie"></i>
              <p>Category distribution chart will be displayed here</p>
            </div>
          </div>
          <div class="analytics-card">
            <h3>Dispute Resolution</h3>
            <div class="chart-placeholder">
              <i class="fas fa-chart-area"></i>
              <p>Dispute resolution chart will be displayed here</p>
            </div>
          </div>
        </div>
      </section>
      <!-- Settings Section -->
      <section class="admin-section" id="settings-section">
        <div class="section-header">
          <h2>System Settings</h2>
        </div>
        <div class="settings-grid">
          <div class="settings-card">
            <h3>General Settings</h3>
            <div class="settings-form">
              <div class="form-group">
                <label>Site Name</label>
                <input type="text" value="Safe Trade Hub" class="form-input">
              </div>
              <div class="form-group">
                <label>Admin Email</label>
                <input type="email" value="221009@students.au.edu.pk" class="form-input">
              </div>
              <div class="form-group">
                <label>Maintenance Mode</label>
                <label class="toggle-switch">
                  <input type="checkbox">
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
          </div>
          <div class="settings-card">
            <h3>Security Settings</h3>
            <div class="settings-form">
              <div class="form-group">
                <label>Session Timeout (minutes)</label>
                <input type="number" value="30" class="form-input">
              </div>
              <div class="form-group">
                <label>Two-Factor Authentication</label>
                <label class="toggle-switch">
                  <input type="checkbox" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <div class="form-group">
                <label>Login Attempts Limit</label>
                <input type="number" value="5" class="form-input">
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
  <!-- Firebase SDK (same version as main site) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <!-- Firebase Configuration (same as main site) -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB0RraIZr7Z3rjKIYw6dE2g_9Waqll5JvI",
      authDomain: "safetradehub-def1d.firebaseapp.com",
      databaseURL: "https://safetradehub-def1d-default-rtdb.firebaseio.com",
      projectId: "safetradehub-def1d",
      storageBucket: "safetradehub-def1d.firebasestorage.app",
      messagingSenderId: "633146502278",
      appId: "1:633146502278:web:6c82d4a0768daebdd7b507",
      measurementId: "G-1857Q7JPKZ"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    // Initialize a specific app for Admin Panel to separate session from main site
    let adminApp;
    try {
      adminApp = firebase.app("AdminPanel");
    } catch (e) {
      adminApp = firebase.initializeApp(firebaseConfig, "AdminPanel");
    }
    // Export for admin-dashboard.js
    window.auth = adminApp.auth();
    window.db = adminApp.database();
  </script>
  <!-- Route Protection -->
  <script>
    // Use the admin app auth for protection
    adminApp.auth().onAuthStateChanged(async (user) => {
      if (!user) {
        window.location.href = 'admin-login.html';
      } else {
        // STRICT ADMIN CHECK
        // Allow the shadow email (v2) which is what we actually use for login
        const allowedAdmins = ['safetradehubteam@gmail.com', 'safetradehubteam+v2@gmail.com'];
        if (!allowedAdmins.includes(user.email.toLowerCase())) {
          alert('Access Denied: Restricted to Administrator only.');
          await adminApp.auth().signOut();
          window.location.href = 'admin-login.html';
          return;
        }
        // Double check admin role
        try {
          // Use admin app database
          const snapshot = await adminApp.database().ref('users/' + user.uid).once('value');
          const userData = snapshot.val();
          if (!userData || userData.role !== 'Admin') {
            alert('Access Denied: Admin privileges required.');
            await adminApp.auth().signOut();
            window.location.href = 'admin-login.html';
          } else {
            // Auth successful, show the dashboard
            document.body.style.display = 'block';
          }
        } catch (e) {
          console.error('Auth check failed', e);
          window.location.href = 'admin-login.html';
        }
      }
    });
  </script>
  <!-- Load authentication system (same as main site) -->
  <script src="/static/js/auth-manager.js"></script>
  <script src="/static/js/header-manager.js"></script>
  <!-- External JavaScript -->
  <!-- Verification Details Modal -->
  <div id="verificationModal" class="modal"
    style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 800px; border-radius: 8px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 id="modalTitle">Verification Details</h2>
        <span class="close" onclick="closeVerificationModal()"
          style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
      </div>
      <div id="modalBody">
        <!-- Dynamic content -->
      </div>
      <div style="margin-top: 20px; text-align: right;">
        <button class="btn btn-secondary" onclick="closeVerificationModal()">Close</button>
        <button id="modalRejectBtn" class="btn btn-danger"
          style="background-color: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin-left: 10px;">Reject</button>
        <button id="modalApproveBtn" class="btn btn-success"
          style="background-color: #22c55e; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin-left: 10px;">Approve</button>
      </div>
    </div>
  </div>
  <!-- Edit User Modal -->
  <div id="editUserModal" class="modal"
    style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 10% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 500px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
      <div
        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
        <h2 style="margin: 0; font-size: 1.5rem; color: #1f2937;">Edit User</h2>
        <span class="close" onclick="closeEditUserModal()"
          style="color: #9ca3af; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 1;">&times;</span>
      </div>
      <form id="editUserForm">
        <input type="hidden" id="editUserId">
        <div class="form-group" style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Full Name</label>
          <input type="text" id="editUserName" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;" required>
        </div>
        <div class="form-group" style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Email (Read-only)</label>
          <input type="email" id="editUserEmail" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px; background-color: #f3f4f6;"
            readonly>
        </div>
        <div class="form-group" style="margin-bottom: 25px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Role</label>
          <select id="editUserRole" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
            <option value="Buyer">Buyer</option>
            <option value="Seller">Seller</option>
            <option value="Admin">Admin</option>
          </select>
        </div>
        <div style="text-align: right; border-top: 1px solid #eee; padding-top: 20px;">
          <button type="button" class="btn btn-secondary" onclick="closeEditUserModal()"
            style="padding: 10px 20px; margin-right: 10px; border: 1px solid #d1d5db; background: white; border-radius: 6px; cursor: pointer;">Cancel</button>
          <button type="submit" class="btn btn-primary"
            style="padding: 10px 20px; background: #4f46e5; color: white; border: none; border-radius: 6px; cursor: pointer;">Save
            Changes</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Product View Modal -->
  <div id="productViewModal" class="modal"
    style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 5% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 800px; border-radius: 8px;">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 id="productViewTitle">Product Details</h2>
        <span class="close" onclick="closeProductViewModal()"
          style="color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;">&times;</span>
      </div>
      <div id="productViewBody">
        <!-- Dynamic content -->
      </div>
      <div style="margin-top: 20px; text-align: right;">
        <button class="btn btn-secondary" onclick="closeProductViewModal()">Close</button>
      </div>
    </div>
  </div>
  <!-- Product Edit Modal -->
  <div id="productEditModal" class="modal"
    style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 5% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 600px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
      <div
        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
        <h2 style="margin: 0; font-size: 1.5rem; color: #1f2937;">Edit Product</h2>
        <span class="close" onclick="closeProductEditModal()"
          style="color: #9ca3af; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 1;">&times;</span>
      </div>
      <form id="editProductForm">
        <input type="hidden" id="editProductId">
        <div class="form-group" style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Product Name</label>
          <input type="text" id="editProductName" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;" required>
        </div>
        <div class="form-group" style="margin-bottom: 15px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Price (RS)</label>
            <input type="number" id="editProductPrice" class="form-input"
              style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;" required>
          </div>
          <div>
            <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Stock</label>
            <input type="number" id="editProductStock" class="form-input"
              style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;" required>
          </div>
        </div>
        <div class="form-group" style="margin-bottom: 15px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Category</label>
          <select id="editProductCategory" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
            <option value="mobile">Mobile</option>
            <option value="camera">Camera</option>
            <option value="computers">Computers</option>
            <option value="fashion">Fashion</option>
            <option value="beauty">Beauty</option>
            <option value="books">Books</option>
            <option value="furniture">Furniture</option>
            <option value="gym">Gym</option>
            <option value="home">Home</option>
            <option value="services">Services</option>
            <option value="sports">Sports</option>
            <option value="pets">Pets</option>
          </select>
        </div>
        <div class="form-group" style="margin-bottom: 25px;">
          <label style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Status</label>
          <select id="editProductStatus" class="form-input"
            style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
            <option value="true">Active</option>
            <option value="false">Inactive</option>
          </select>
        </div>
        <div style="text-align: right; border-top: 1px solid #eee; padding-top: 20px;">
          <button type="button" class="btn btn-secondary" onclick="closeProductEditModal()"
            style="padding: 10px 20px; margin-right: 10px; border: 1px solid #d1d5db; background: white; border-radius: 6px; cursor: pointer;">Cancel</button>
          <button type="submit" class="btn btn-primary"
            style="padding: 10px 20px; background: #4f46e5; color: white; border: none; border-radius: 6px; cursor: pointer;">Save
            Changes</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Order View Modal -->
  <div id="orderViewModal" class="modal"
    style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 5% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 900px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
      <div
        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px;">
        <h2 style="margin: 0; font-size: 1.5rem; color: #1f2937;">Order Details</h2>
        <span class="close" onclick="closeOrderViewModal()"
          style="color: #9ca3af; font-size: 28px; font-weight: bold; cursor: pointer; line-height: 1;">&times;</span>
      </div>
      <div id="orderViewBody">
        <!-- Dynamic content -->
      </div>
      <div style="margin-top: 20px; text-align: right; border-top: 1px solid #eee; padding-top: 20px;">
        <button class="btn btn-secondary" onclick="closeOrderViewModal()"
          style="padding: 10px 20px; border: 1px solid #d1d5db; background: white; border-radius: 6px; cursor: pointer;">Close</button>
      </div>
    </div>
  </div>
  <!-- Confirmation Modal -->
  <div id="confirmationModal" class="modal"
    style="display: none; position: fixed; z-index: 1100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5);">
    <div class="modal-content"
      style="background-color: #fefefe; margin: 15% auto; padding: 25px; border: 1px solid #888; width: 90%; max-width: 400px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); text-align: center;">
      <div style="margin-bottom: 20px;">
        <h3 id="confirmTitle" style="margin: 0 0 10px 0; color: #1f2937;">Confirm Action</h3>
        <p id="confirmMessage" style="color: #4b5563; margin: 0;">Are you sure?</p>
      </div>
      <div id="confirmInputContainer" style="display: none; margin-bottom: 20px; text-align: left;">
        <label for="confirmInput"
          style="display: block; margin-bottom: 5px; font-weight: 500; color: #374151;">Reason</label>
        <input type="text" id="confirmInput" class="form-input" placeholder="Enter reason..."
          style="width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
      </div>
      <div style="display: flex; justify-content: center; gap: 10px;">
        <button id="confirmCancelBtn" class="btn btn-secondary"
          style="padding: 8px 20px; border: 1px solid #d1d5db; background: white; border-radius: 6px; cursor: pointer;">Cancel</button>
        <button id="confirmOkBtn" class="btn btn-primary"
          style="padding: 8px 20px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer;">Confirm</button>
      </div>
    </div>
  </div>
  <script src="/static/js/admin-dashboard.js?v=20"></script>
</body>

</html>