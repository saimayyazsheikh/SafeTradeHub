<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Product Analytics – Safe Trade Hub</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="css/product-analytics.css" />
  
  <!-- Chart.js for analytics charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  
  <!-- Firebase Configuration -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBK-1VZZImDnjmRCXBEzyLAq6AthTZ8yIs",
      authDomain: "safe-trade-hub-a57cb.firebaseapp.com",
      projectId: "safe-trade-hub-a57cb",
      storageBucket: "safe-trade-hub-a57cb.appspot.com",
      messagingSenderId: "509522351934",
      appId: "1:509522351934:web:a9f5624cded8f7a6d93e6f",
      measurementId: "G-060FYYP5DD"
    };
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
  </script>
  
  <!-- Load authentication system -->
  <script src="js/auth-manager.js"></script>
  <script src="js/header-manager.js"></script>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="index.html" class="logo">SafeTradeHub</a>
      <nav class="header-actions">
        <!-- Navigation will be updated by HeaderManager -->
      </nav>
    </div>
  </header>

  <main class="main-content">
    <!-- Breadcrumb -->
    <section class="breadcrumb-section">
      <div class="container">
        <nav class="breadcrumb">
          <a href="index.html">Home</a>
          <span class="breadcrumb-separator">›</span>
          <a href="dashboard.html">Dashboard</a>
          <span class="breadcrumb-separator">›</span>
          <a href="product-management.html">Product Management</a>
          <span class="breadcrumb-separator">›</span>
          <span class="breadcrumb-current">Product Analytics</span>
        </nav>
      </div>
    </section>

    <!-- Analytics Header -->
    <section class="analytics-header">
      <div class="container">
        <div class="header-content">
          <div class="header-text">
            <h1 id="productName">Product Analytics</h1>
            <p class="header-subtitle" id="productDescription">Detailed performance metrics and insights</p>
          </div>
          <div class="header-actions">
            <a href="product-management.html" class="btn btn-secondary">
              <svg class="btn-icon" viewBox="0 0 24 24">
                <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
              </svg>
              Back to Management
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Key Metrics -->
    <section class="metrics-section">
      <div class="container">
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-icon views">
              <svg viewBox="0 0 24 24">
                <path d="M1,12C1,12 5,4 12,4C19,4 23,12 23,12C23,12 19,20 12,20C5,20 1,12 1,12Z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </div>
            <div class="metric-content">
              <div class="metric-number" id="totalViews">0</div>
              <div class="metric-label">Total Views</div>
              <div class="metric-change positive" id="viewsChange">+0%</div>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-icon favorites">
              <svg viewBox="0 0 24 24">
                <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/>
              </svg>
            </div>
            <div class="metric-content">
              <div class="metric-number" id="totalFavorites">0</div>
              <div class="metric-label">Favorites</div>
              <div class="metric-change positive" id="favoritesChange">+0%</div>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-icon orders">
              <svg viewBox="0 0 24 24">
                <path d="M7,4V2A1,1 0 0,1 8,1H16A1,1 0 0,1 17,2V4H20A1,1 0 0,1 21,5V9A1,1 0 0,1 20,10H19V19A2,2 0 0,1 17,21H7A2,2 0 0,1 5,19V10H4A1,1 0 0,1 3,9V5A1,1 0 0,1 4,4H7M9,3V4H15V3H9M7,6V19H17V6H7Z"/>
              </svg>
            </div>
            <div class="metric-content">
              <div class="metric-number" id="totalOrders">0</div>
              <div class="metric-label">Total Orders</div>
              <div class="metric-change positive" id="ordersChange">+0%</div>
            </div>
          </div>

          <div class="metric-card">
            <div class="metric-icon revenue">
              <svg viewBox="0 0 24 24">
                <path d="M7,15H9C9,16.08 10.37,17 12,17C13.63,17 15,16.08 15,15C15,13.9 13.96,13.5 11.76,12.97C9.64,12.44 7,11.78 7,9C7,7.21 8.47,5.69 10.5,5.18V3H13.5V5.18C15.53,5.69 17,7.21 17,9H15C15,7.92 13.63,7 12,7C10.37,7 9,7.92 9,9C9,10.1 10.04,10.5 12.24,11.03C14.36,11.56 17,12.22 17,15C17,16.79 15.53,18.31 13.5,18.82V21H10.5V18.82C8.47,18.31 7,16.79 7,15Z"/>
              </svg>
            </div>
            <div class="metric-content">
              <div class="metric-number" id="totalRevenue">$0</div>
              <div class="metric-label">Total Revenue</div>
              <div class="metric-change positive" id="revenueChange">+0%</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Charts Section -->
    <section class="charts-section">
      <div class="container">
        <div class="charts-grid">
          <!-- Views Over Time Chart -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Views Over Time</h3>
              <div class="chart-controls">
                <select id="viewsTimeRange" class="chart-select">
                  <option value="7">Last 7 days</option>
                  <option value="30" selected>Last 30 days</option>
                  <option value="90">Last 90 days</option>
                </select>
              </div>
            </div>
            <div class="chart-container">
              <canvas id="viewsChart"></canvas>
            </div>
          </div>

          <!-- Orders Status Chart -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Orders by Status</h3>
            </div>
            <div class="chart-container">
              <canvas id="ordersChart"></canvas>
            </div>
          </div>

          <!-- Conversion Funnel -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Conversion Funnel</h3>
            </div>
            <div class="funnel-container">
              <div class="funnel-step">
                <div class="funnel-label">Views</div>
                <div class="funnel-bar" id="funnelViews">0</div>
              </div>
              <div class="funnel-step">
                <div class="funnel-label">Favorites</div>
                <div class="funnel-bar" id="funnelFavorites">0</div>
              </div>
              <div class="funnel-step">
                <div class="funnel-label">Orders</div>
                <div class="funnel-bar" id="funnelOrders">0</div>
              </div>
              <div class="funnel-step">
                <div class="funnel-label">Completed</div>
                <div class="funnel-bar" id="funnelCompleted">0</div>
              </div>
            </div>
          </div>

          <!-- Performance Metrics -->
          <div class="chart-card">
            <div class="chart-header">
              <h3>Performance Metrics</h3>
            </div>
            <div class="metrics-list">
              <div class="metric-item">
                <div class="metric-label">Conversion Rate</div>
                <div class="metric-value" id="conversionRate">0%</div>
              </div>
              <div class="metric-item">
                <div class="metric-label">Average Rating</div>
                <div class="metric-value" id="averageRating">0/5</div>
              </div>
              <div class="metric-item">
                <div class="metric-label">Total Reviews</div>
                <div class="metric-value" id="totalReviews">0</div>
              </div>
              <div class="metric-item">
                <div class="metric-label">Revenue per View</div>
                <div class="metric-value" id="revenuePerView">$0</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Recent Activity -->
    <section class="activity-section">
      <div class="container">
        <div class="section-header">
          <h2>Recent Activity</h2>
          <div class="activity-controls">
            <select id="activityFilter" class="chart-select">
              <option value="all">All Activity</option>
              <option value="views">Views</option>
              <option value="favorites">Favorites</option>
              <option value="orders">Orders</option>
            </select>
          </div>
        </div>
        <div class="activity-list" id="activityList">
          <!-- Activity items will be loaded here -->
        </div>
      </div>
    </section>
  </main>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>Loading analytics...</p>
    </div>
  </main>

  <!-- Scripts -->
  <script src="js/product-analytics.js"></script>
</body>
</html>
